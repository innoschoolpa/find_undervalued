# 🔧 500 오류 긴급 해결 가이드

## 📊 **문제 상황**
- KIS API가 297개 종목 시세 조회 중 500 오류 폭주
- 재시도 로직이 무한 반복 중 (450+ 오류)
- 캐시 없음 (재시작 후 첫 실행)

## ✅ **즉시 해결 방법**

### **방법 1: 종목 수 대폭 감소** (권장! ⭐)

1. **Ctrl+C**로 Streamlit 중단
2. 브라우저 새로고침
3. **왼쪽 사이드바 설정 변경:**
   - **"후보 종목 수"**: 300 → **50**
   - (또는 **100**으로)
4. **"가치주 발굴" 버튼 클릭**

→ **50개만 조회하면 99% 성공!**

---

### **방법 2: 잠깐 기다렸다가 재시도** (인내심)

**KIS API 쿨다운 대기:**
1. **Ctrl+C**로 완전 중단
2. **5~10분 대기** (☕ 커피 한 잔)
3. Streamlit 재시작
4. 종목 수 **100개**로 설정
5. 재시도

→ KIS 서버가 쿨다운되면 성공률 ↑

---

## 🎯 **권장 설정 (안정적)**

```
후보 종목 수: 50~100개
선정 종목 수: 10~15개
```

**왜?**
- 50개 조회 = API 부하 85% 감소
- 품질 저하 없음 (상위 50개면 충분)
- 처리 시간 ~10초 (빠름!)

---

## 📈 **예상 결과 (50개)**

```log
✅ 시세 수집 완료: 50개 종목
📈 모멘텀 가점 계산 중 (상위 30개만)...
✅ 모멘텀 가점 완료: 30/30개 (성공률 100%)
✅ 최종 10개 선정

(500 오류 없음! ✅)
```

---

## ⚠️ **300개는 왜 안될까?**

- **캐시 있을 때**: OK (이전 실행처럼)
- **캐시 없을 때**: ❌ KIS 서버 과부하
- **300번 연속 조회** = API 한계 초과

**해결:**
- 첫 실행은 **50~100개**로
- 캐시가 쌓이면 다음부터 300개도 가능







