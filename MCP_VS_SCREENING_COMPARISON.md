# 🔍 MCP 실시간 분석 vs 가치주 스크리닝 비교

**작성**: 2025-10-12  
**목적**: 두 시스템의 차이점 이해 및 활용 가이드

---

## 📋 핵심 차이 요약

| 구분 | MCP 실시간 분석 | 가치주 스크리닝 |
|------|----------------|----------------|
| **목적** | 실전 포트폴리오 구성 | 종목 발굴 및 평가 |
| **출력** | 투자 가능 종목 (5~20개) | 순위표 (제한 없음) |
| **비중 관리** | ✅ 자동 계산 (%) | ❌ 없음 |
| **섹터 제한** | ✅ 강제 (금융 20% 등) | ⚠️ 권장만 (30%) |
| **리스크 제외** | ✅ 필수 (지주/정책/사이클) | ⚠️ 플래그만 |
| **모멘텀** | ✅ 통합 (6M 수익률) | ❌ 없음 |
| **현금 정책** | ✅ 자동 (50% 등) | ❌ 없음 |
| **실시간성** | ✅ 높음 (KIS API) | ⚠️ 캐시 사용 |
| **평가 깊이** | ⚠️ 빠른 스크리닝 | ✅ 심층 분석 |

---

## 🎯 1. MCP 실시간 분석

### 목적
**"오늘 당장 매수할 5개 종목 추천"**

### 특징

#### ✅ 포트폴리오 중심
```python
결과:
  1. 현대차 (운송장비) - 72.2점 - 비중 10%
  2. SK텔레콤 (통신) - 64.6점 - 비중 10%
  3. KT&G (제조업) - 45.7점 - 비중 10%
  4. 현대글로비스 (운송) - 45.6점 - 비중 10%
  5. 크래프톤 (IT) - 36.8점 - 비중 10%
  
  → 주식 50%, 현금 50%
```

**특징**:
- 비중 자동 계산
- 섹터 분산 강제
- 현금 비율 제안

#### ✅ 강력한 리스크 관리
```python
제외 규칙:
  ❌ 지주회사 (NAV 갭 리스크)
  ❌ 정책 리스크 (한국전력, 항공)
  ❌ 사이클 민감 (HMM 같은 해운)
  ❌ 극단 하락 (모멘텀 -30% 이상)
```

#### ✅ 섹터 캡 강제
```python
제한:
  금융: 최대 20%
  지주회사: 최대 0% (제외)
  기타: 최대 35%
  
→ 과도 집중 방지
```

#### ✅ 모멘텀 통합
```python
점수 구성:
  가치: 50%
  모멘텀: 10% (6개월 수익률)
  투자자: 10%
  거래: 10%
  기술: 10%
  배당: 5%
  안정: 10%
  
→ 밸류 + 모멘텀 조합
```

### 장점
- ✅ 실전 투자 즉시 가능
- ✅ 리스크 제어 강력
- ✅ 포트폴리오 자동 구성
- ✅ 비중 계산 자동
- ✅ 빠른 실행 (초단위)

### 단점
- ⚠️ 평가 깊이 제한적
- ⚠️ Justified Multiple 없음
- ⚠️ 품질 지표 간단 (F-Score 등 없음)
- ⚠️ 설명 가능성 부족

---

## 💎 2. 가치주 스크리닝

### 목적
**"심층 평가로 진짜 저평가 종목 발굴"**

### 특징

#### ✅ 정교한 밸류에이션
```python
점수 구성 (148점 만점):
  PER 퍼센타일: 20점
  PBR 퍼센타일: 20점
  ROE 퍼센타일: 20점
  품질지표: 43점
    - FCF Yield: 15점
    - Interest Coverage: 10점
    - Piotroski F-Score: 18점
  섹터 보너스: 10점
  MoS (Justified Multiple): 35점
  리스크 감점: 최대 -100점
```

**특징**:
- Justified PER/PBR 계산
- 동적 r, b 레짐 모델
- 섹터별 퍼센타일

#### ✅ 심층 품질 분석
```python
품질 지표:
  ✅ FCF Yield (현금흐름)
  ✅ Interest Coverage (이자보상배율)
  ✅ Piotroski F-Score (9점 체계)
  ✅ OCF 적자 체크
  ✅ 순이익 변동성
  ✅ 감사의견
```

#### ✅ 리스크 플래그 (v2.2.2)
```python
14개 리스크 항목:
  회계: OCF 적자, 변동성, 감사의견, 자본잠식, 부채비율
  이벤트: 관리종목, 불성실공시, 투자유의
  유동성: 저유동성
  
→ 자동 감점 (최대 -100점)
```

#### ✅ 설명 가능성 (XAI)
```python
출력:
  ✅ 기여도 분해 테이블
  ✅ 컴포넌트별 상세 점수
  ✅ 개선 제안
  ✅ "왜 이 점수인가?" 설명
```

### 장점
- ✅ 평가 깊이 심층적
- ✅ Justified Multiple (CFA 교과서 기반)
- ✅ 리스크 플래그 14개
- ✅ XAI 설명 가능
- ✅ 캘리브레이션 UI

### 단점
- ⚠️ 실행 시간 길음 (분단위)
- ⚠️ 비중 계산 없음
- ⚠️ 포트폴리오 제안 없음
- ⚠️ 모멘텀 미고려

---

## 🔄 프로세스 비교

### MCP 실시간 분석 흐름
```
1. 후보 수집 (200개)
   - 거래량 상위
   - 시가총액 상위  
   - PER 상위
   - 배당률 상위
   
2. 빠른 필터링
   - 업종별 기준 (PER/PBR/ROE)
   - 거래대금 50억 이상
   - ETF/ETN 제외
   
3. 점수 계산 (7개 컴포넌트)
   - 가치 50%
   - 모멘텀 10%
   - 투자자 10%
   - 거래 10%
   - 기술 10%
   - 배당 5%
   - 안정 10%
   
4. 리스크 제외
   - 지주회사 제거
   - 정책/사이클 제거 (한전, 항공, 해운)
   
5. 섹터 내 랭킹
   - 섹터별로 상위 선정
   - 섹터 캡 적용
   
6. 비중 계산
   - 개별 상한 10%
   - 현금 비율 자동
   
→ 출력: 5개 종목 + 비중 (주식 50%, 현금 50%)
→ 시간: ~30초
```

### 가치주 스크리닝 흐름
```
1. 종목 수집 (15~250개)
   - KIS API 또는 폴백
   
2. 섹터 데이터 보강
   - 섹터 퍼센타일 계산
   - 글로벌 대체 (v2.2.2)
   
3. 심층 평가 (148점 만점)
   - PER/PBR/ROE 퍼센타일 (60점)
   - 품질 지표 3종 (43점)
   - 섹터 보너스 (10점)
   - Justified Multiple MoS (35점)
   
4. 리스크 평가 (v2.2.2)
   - 14개 리스크 항목 자동 감지
   - 감점 적용 (최대 -100점)
   
5. 등급 결정
   - A+/A/B+/B/C+/C
   - BUY/HOLD/SELL
   
6. XAI 설명 생성
   - 기여도 분해
   - 개선 제안
   
→ 출력: 순위표 + 상세 분석 + 설명
→ 시간: ~3분 (50개 기준)
```

---

## 🎯 사용 시나리오별 권장

### 시나리오 1: 오늘 당장 매수할 종목
```
권장: MCP 실시간 분석 ⭐

이유:
  ✅ 즉시 투자 가능한 포트폴리오
  ✅ 비중 자동 계산
  ✅ 섹터 분산 보장
  ✅ 현금 비율 제안
  ✅ 빠른 실행 (30초)
  
사용:
  Streamlit > "MCP 실시간 분석" 탭
```

---

### 시나리오 2: 진짜 저평가 종목 심층 발굴
```
권장: 가치주 스크리닝 ⭐

이유:
  ✅ Justified Multiple 기반
  ✅ 14개 리스크 플래그
  ✅ 품질 지표 3종
  ✅ XAI 설명
  ✅ 캘리브레이션 UI
  
사용:
  Streamlit > "전체 종목 스크리닝" 탭
```

---

### 시나리오 3: 특정 종목 상세 분석
```
권장: 가치주 스크리닝 (개별 분석) ⭐

이유:
  ✅ 148점 체계 상세 분석
  ✅ XAI 기여도 분해
  ✅ 섹터 대비 평가
  ✅ MoS 계산 및 설명
  
사용:
  Streamlit > "개별 종목 분석" 탭
```

---

### 시나리오 4: 후보군 발굴 후 검증
```
권장: MCP (1차) + 스크리닝 (2차) ⭐⭐⭐

프로세스:
  1단계 (MCP): 5개 종목 빠르게 선정
  2단계 (스크리닝): 5개를 심층 검증
  
효과:
  ✅ 속도 + 깊이 모두 확보
  ✅ 실전 투자 가능 + 확신 강화
```

---

## 🔬 상세 비교

### 1. 평가 방법론

#### MCP
```python
점수 = (
    가치점수 * 50% +      # PER/PBR/ROE 단순 비교
    투자자점수 * 10% +    # 기관/외국인 순매수
    거래점수 * 10% +      # 거래대금/회전율
    기술점수 * 10% +      # RSI/볼린저밴드
    배당점수 * 5% +       # 배당률
    안정점수 * 10% +      # 부채비율/유동비율
    섹터점수 * 5%         # 섹터 내 순위
)

총점: 100점
```

#### 스크리닝
```python
점수 = (
    PER 퍼센타일 * 20 +           # 섹터 내 순위
    PBR 퍼센타일 * 20 +           # 섹터 내 순위
    ROE 퍼센타일 * 20 +           # 섹터 내 순위
    FCF Yield * 15 +              # 현금흐름
    Interest Coverage * 10 +       # 이자보상배율
    Piotroski F-Score * 18 +      # 9점 체계 * 2
    섹터보너스 * 10 +             # 기준 충족
    Justified MoS * 35 +          # 안전마진
    리스크감점 (최대 -100)        # 14개 항목
)

총점: 148점 (감점 후 음수 가능)
```

**핵심 차이**:
- MCP: 7개 요소 균형
- 스크리닝: Justified Multiple + 품질 + 리스크

---

### 2. 리스크 관리

#### MCP
```python
강제 제외:
  ❌ 지주회사 (전부)
  ❌ 한국전력 (정책 리스크)
  ❌ 항공사 (사이클 민감)
  ❌ HMM (해운, 사이클)
  
섹터 캡:
  금융: 최대 20%
  지주: 0% (제외)
  기타: 35%
```

#### 스크리닝
```python
리스크 플래그 (감점):
  ⚠️ 3년 연속 OCF 적자: -15점
  ⚠️ 감사의견 한정: -15점
  ⚠️ 관리종목: -30점
  ⚠️ 부채비율 500% 이상: -12점
  ⚠️ 저유동성: -10점
  ... (14개 항목)
  
→ 제외는 안 하지만 점수 크게 하락
```

**핵심 차이**:
- MCP: 하드 제외 (강력)
- 스크리닝: 소프트 감점 (유연)

---

### 3. 출력 형식

#### MCP
```
최종 선정 종목 (5개):
─────────────────────────────────────
 1. 현대차 [운송장비] 점수=72.2 비중=10.0%
 2. SK텔레콤 [통신] 점수=64.6 비중=10.0%
 ...
─────────────────────────────────────
포트폴리오 요약:
  📈 주식 비중: 50.0%
  💵 현금 비중: 50.0%
  📊 섹터 수: 5개
  🎯 리밸런스: 월 1회 권장
```

**특징**: 실전 투자 즉시 가능

#### 스크리닝
```
순위 | 종목명 | 점수 | 등급 | 추천 | PER | PBR | ROE | 안전마진
─────────────────────────────────────────────────────────
  1  | 삼성전자 | 78.9 | B+ | BUY | 15.0 | 1.2 | 12.0 | +15.2%
  2  | 현대차 | 75.5 | B+ | BUY | 10.5 | 0.8 | 15.0 | +20.1%
  ...
  
+ XAI 설명
+ 기여도 테이블
+ 개선 제안
```

**특징**: 심층 분석 및 이해

---

## 📊 실제 예시 비교

### 삼성전자 평가

#### MCP 결과
```
점수: 45.0/100
평가: ❌ 제외
이유: PER=19.1 (기준 15.0 초과)
      PBR=1.6 (기준 1.5 초과)
      
→ 후보군에 포함 안 됨
```

#### 스크리닝 결과
```
점수: 78.9/148
등급: B+ (양호)
추천: HOLD
상세:
  - PER 점수: 8.5/20 (섹터 대비 중간)
  - PBR 점수: 9.2/20
  - ROE 점수: 12.0/20
  - 품질: 28.0/43 (양호)
  - MoS: 15.0/35 (보통)
  - 리스크: 0점 (양호)
  
→ 상세 분석 제공
```

**핵심 차이**:
- MCP: 하드 컷 (제외)
- 스크리닝: 소프트 평가 (다면적 분석)

---

## 🎯 권장 활용 전략

### 전략 A: MCP 단독 (빠른 투자)
```
상황: 시간 없음, 즉시 투자 필요
방법: MCP 실시간 분석 실행
결과: 5개 종목 + 비중 → 바로 매수
시간: 30초
```

---

### 전략 B: 스크리닝 단독 (심층 연구)
```
상황: 시간 충분, 철저한 분석 원함
방법: 가치주 스크리닝 50~100개
결과: 순위표 + XAI → 수동 선택
시간: 3~5분
```

---

### 전략 C: 하이브리드 (권장) ⭐⭐⭐
```
1단계 (MCP):
  → 5개 종목 빠르게 선정
  → 시간: 30초
  
2단계 (스크리닝 개별 분석):
  → 5개를 하나씩 심층 검증
  → XAI로 점수 이해
  → 리스크 확인
  → 시간: 2분
  
총 시간: 2.5분
효과: 속도 + 깊이 모두 확보 ✅
```

**예시**:
```
MCP 선정: 현대차, SK텔레콤, KT&G, 현대글로비스, 크래프톤

↓ 개별 분석

현대차:
  스크리닝 점수: 75.5/148
  등급: B+
  MoS: +20.1%
  리스크: ✅ 양호
  → ✅ 매수 확정
  
크래프톤:
  스크리닝 점수: 36.8/148
  등급: C+
  MoS: -5.2%
  리스크: ⚠️ 주의 (부채비율 높음)
  → ⚠️ 재검토 필요
```

---

## 💡 핵심 차이점

### 철학적 차이

#### MCP
**"실전 포트폴리오를 지금 당장 만들자"**
- 포트폴리오 중심
- 리스크 제어 강력
- 즉시 실행 가능
- 비중 관리 자동

#### 스크리닝
**"진짜 저평가를 철저히 분석하자"**
- 개별 종목 중심
- 평가 깊이 심층
- 이해 및 학습 중시
- 수동 의사결정 지원

---

### 기술적 차이

| 항목 | MCP | 스크리닝 |
|------|-----|---------|
| **Justified Multiple** | ❌ | ✅ |
| **동적 r, b** | ❌ | ✅ |
| **Piotroski F-Score** | ❌ | ✅ |
| **리스크 플래그 14개** | ❌ | ✅ |
| **XAI 설명** | ❌ | ✅ |
| **모멘텀** | ✅ | ❌ |
| **비중 계산** | ✅ | ❌ |
| **섹터 강제 분산** | ✅ | ❌ |
| **현금 정책** | ✅ | ❌ |

---

## 🔧 통합 가이드

### config.yaml 설정

```yaml
# MCP 설정
mcp:
  enabled: true
  default_limit: 5
  sector_caps:
    금융: 0.20
    지주회사: 0.0  # 제외
  
# 스크리닝 설정
screening:
  enabled: true
  max_stocks: 50
  use_justified_multiple: true
  risk_flags_enabled: true
```

---

## 🎯 결론 및 권장

### 각 시스템의 강점

#### MCP = 실전 투자 도구
```
✅ 빠른 의사결정 (30초)
✅ 즉시 실행 가능
✅ 포트폴리오 구성
✅ 리스크 제어 강력
```

#### 스크리닝 = 연구 분석 도구
```
✅ 심층 평가 (148점 체계)
✅ 학습 및 이해
✅ XAI 설명
✅ 리스크 세밀 분석
```

### 최적 활용법 ⭐⭐⭐

```
1. MCP로 후보 5개 빠르게 선정 (30초)
   ↓
2. 스크리닝 개별 분석으로 검증 (각 30초)
   ↓
3. 확신 있는 종목만 최종 매수
   ↓
결과: 빠르면서도 확실한 투자 결정
```

---

## 📊 비교표 (최종)

| 기준 | MCP 실시간 | 스크리닝 | 하이브리드 |
|------|-----------|---------|----------|
| **속도** | ⭐⭐⭐⭐⭐ 30초 | ⭐⭐⭐ 3분 | ⭐⭐⭐⭐ 2.5분 |
| **깊이** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **실전성** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **이해도** | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **리스크 관리** | ⭐⭐⭐⭐⭐ 하드 | ⭐⭐⭐⭐ 소프트 | ⭐⭐⭐⭐⭐ |

**종합 추천**: 하이브리드 ⭐⭐⭐⭐⭐

---

## 🚀 실전 사용 예시

### 월요일 아침 (리밸런싱)
```
09:00 - MCP 실시간 분석 실행
        → 5개 종목 선정 (비중 포함)
        
09:05 - 5개를 개별 분석으로 검증
        → XAI로 점수 이해
        → 리스크 확인
        
09:15 - 확신 있는 3~4개만 매수
        → 나머지는 대기 또는 제외
```

### 주말 (심층 연구)
```
토요일 - 가치주 스크리닝 100개 실행
         → 상위 20개 발굴
         → CSV 저장
         
일요일 - 20개 개별 분석
         → XAI로 이해
         → 리스크 확인
         → 5개 최종 후보 선정
         
월요일 - 5개 매수
```

---

## 📝 요약

### MCP 실시간 분석
**"빠르고 실전적인 포트폴리오 구성"**
- ⚡ 속도: 초단위
- 🎯 목적: 즉시 투자
- 🛡️ 리스크: 하드 제외
- 📊 출력: 비중 포함

### 가치주 스크리닝
**"깊고 철저한 가치 평가"**
- 🔍 깊이: 148점 체계
- 🎓 목적: 이해 및 학습
- ⚠️ 리스크: 세밀 감점
- 📈 출력: 순위 + 설명

### 하이브리드 (권장)
**"속도와 깊이의 완벽한 조합"**
- ⚡ MCP로 후보 선정
- 🔍 스크리닝으로 검증
- ✅ 확신 있는 투자
- 📊 최적 의사결정

---

**작성**: 2025-10-12  
**권장**: 하이브리드 활용 ⭐⭐⭐⭐⭐  
**상태**: 두 시스템 모두 프로덕션 준비 완료 ✅


