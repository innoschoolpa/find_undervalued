# 통합 분석 시스템

투자의견 분석 시스템과 추정실적 분석 시스템을 통합한 종합 투자 분석 시스템입니다.

## 🎯 주요 기능

### 1. 통합 분석
- 투자의견과 추정실적을 종합한 360도 분석
- 통합 점수 계산 (0-100점)
- A~F 등급 시스템
- 투자 추천 및 리스크 평가

### 2. 통합 비교 분석
- 여러 종목의 통합 분석 결과 비교
- 다양한 지표별 랭킹 제공
- 투자 후보 스크리닝

### 3. 최고 투자 후보 검색
- 설정 가능한 최소 점수 기준
- 자동 스크리닝 및 랭킹
- 상위 종목 상세 분석

## 🚀 사용법

### 1. 단일 종목 통합 분석

```bash
python main.py integrated analyze-integrated 005930 --details --export-csv
```

**옵션:**
- `symbol`: 분석할 종목 코드 (필수)
- `--days, -d`: 투자의견 분석 기간 (일, 기본값: 30)
- `--export-csv`: CSV 파일로 내보내기
- `--details`: 상세 분석 표시

### 2. 다중 종목 통합 비교

```bash
python main.py integrated compare-integrated --symbols "005930,000660,035420,051910"
```

**옵션:**
- `--symbols, -s`: 비교할 종목 코드들 (쉼표로 구분)
- `--days, -d`: 투자의견 분석 기간 (일, 기본값: 30)
- `--export-csv`: CSV 파일로 내보내기
- `--ranking-only`: 랭킹만 표시

### 3. 최고 투자 후보 검색

```bash
python main.py integrated top-picks --symbols "005930,000660,035420,051910,006400" --min-score 60 --max-stocks 5
```

**옵션:**
- `--symbols, -s`: 검색할 종목 코드들 (쉼표로 구분)
- `--days, -d`: 투자의견 분석 기간 (일, 기본값: 30)
- `--min-score`: 최소 통합 점수 (기본값: 60)
- `--max-stocks`: 최대 추천 종목 수 (기본값: 5)
- `--export-csv`: CSV 파일로 내보내기

## 📊 통합 점수 시스템

### 점수 구성 (총 100점)
1. **투자의견 점수 (30점)**
   - 컨센서스 점수 기반
   - -1~1 범위를 0~30점으로 변환

2. **추정실적 점수 (40점)**
   - 재무건전성 점수 (20점)
   - 밸류에이션 점수 (20점)

3. **성장성 점수 (20점)**
   - 매출액 성장률 기반
   - 20% 이상: 20점
   - 10-20%: 15점
   - 0-10%: 10점
   - -10-0%: 5점
   - -10% 미만: 0점

4. **데이터 품질 점수 (10점)**
   - 추정실적 데이터 품질 기반

### 등급 시스템
- **A등급 (80점 이상)**: 강력 매수 추천
- **B등급 (60-79점)**: 매수 추천 또는 적극 검토
- **C등급 (40-59점)**: 보유 추천 또는 신중 검토
- **D등급 (20-39점)**: 관망 추천
- **F등급 (20점 미만)**: 매도 검토

## 🔍 투자 추천 시스템

### 추천 등급
1. **강력 매수 추천** (80점 이상)
2. **매수 추천** (60-79점, 컨센서스 & 밸류 양호)
3. **적극 검토 추천** (60-79점, 기타)
4. **보유 추천** (40-59점, 컨센서스 & 재무 양호)
5. **신중 검토** (40-59점, 기타)
6. **관망 추천** (20-39점)
7. **매도 검토** (20점 미만)

## ⚠️ 리스크 평가

### 리스크 요인
1. **데이터 품질 낮음** (품질점수 < 0.5)
2. **재무건전성 우려** (건전성 점수 < 40)
3. **매출 감소 우려** (성장률 < -10%)
4. **투자의견 부정적** (매수 비율 < 30%)

### 리스크 등급
- **낮음**: 리스크 요인 없음
- **보통**: 1-2개 리스크 요인
- **높음**: 3개 이상 리스크 요인

## 📈 분석 결과 예시

### 통합 분석 결과
```
📊 005930 (삼성전자) 통합 분석 결과
┌──────────────────────┬─────────────────┐
│ 분석 영역            │ 결과            │
├──────────────────────┼─────────────────┤
│ 통합 점수            │ 72.0/100점      │
│ 통합 등급            │ B               │
│ 투자 추천            │ 적극 검토 추천  │
│ 리스크 평가          │ 낮음            │
│                      │                 │
│ 총 투자의견          │ 4건             │
│ 매수 의견            │ 4건             │
│ 컨센서스 점수        │ 1.00            │
│ 평균 목표가          │ 93,750원        │
│ 평균 상승률          │ +27.6%          │
│                      │                 │
│ 현재가               │ 73,400원        │
│ 매출액               │ 268조원         │
│ 매출 성장률          │ +22.1%          │
│ 영업이익             │ 43조원          │
│ 영업이익 성장률      │ +18.3%          │
│ EPS                  │ 1,064원         │
│ PER                  │ 69.0배          │
│ ROE                  │ 171.0%          │
│ 재무건전성           │ 50/100점        │
│ 밸류에이션           │ 10/100점        │
└──────────────────────┴─────────────────┘
```

### 투자 후보 랭킹
```
🏆 최고의 투자 후보 3개
┌─┬─────┬───────┬────┬────────────┬──────┬───────┬────────┬───────┬──────┬─────┐
│ │종목코드│통합점수│등급│투자추천    │리스크│컨센서스│밸류점수│재무점수│PER   │ROE  │
├─┼─────┼───────┼────┼────────────┼──────┼───────┼────────┼───────┼──────┼─────┤
│ │005930│72.0  │B  │적극 검토 추천│낮음  │1.00   │10      │50     │69.0  │171% │
│ │000660│72.0  │B  │적극 검토 추천│낮음  │1.00   │10      │50     │231.0 │36%  │
│ │051910│57.0  │C  │신중 검토    │보통  │0.00   │10      │50     │253.0 │69%  │
└─┴─────┴───────┴────┴────────────┴──────┴───────┴────────┴───────┴──────┴─────┘
```

## 🔗 시스템 통합

통합 분석 시스템은 다음 두 시스템을 결합합니다:

1. **투자의견 분석 시스템**
   - 증권사 투자의견 수집 및 분석
   - 컨센서스 점수 계산
   - 목표가 및 상승률 분석

2. **추정실적 분석 시스템**
   - 추정손익계산서 분석
   - 투자지표 분석
   - 재무건전성 평가

## 📁 파일 구조

```
test_integrated_analysis.py      # 통합 분석 테스트
integrated_analysis_cli.py       # 통합 분석 CLI
investment_opinion_*.py          # 투자의견 분석 시스템
estimate_performance_*.py        # 추정실적 분석 시스템
```

## 🎯 활용 예시

### 1. 포트폴리오 구성
```bash
# 상위 5개 종목으로 포트폴리오 구성
python main.py integrated top-picks --symbols "005930,000660,035420,051910,006400,035720,373220,000270" --min-score 70 --max-stocks 5 --export-csv
```

### 2. 종목 비교 분석
```bash
# 관심 종목들 비교
python main.py integrated compare-integrated --symbols "005930,000660,035420" --export-csv
```

### 3. 단일 종목 심층 분석
```bash
# 특정 종목 상세 분석
python main.py integrated analyze-integrated 005930 --details --export-csv
```

## ⚡ 성능 특징

- **실시간 분석**: KIS API 기반 실시간 데이터
- **자동 스크리닝**: 설정 가능한 기준으로 자동 필터링
- **포괄적 평가**: 투자의견 + 추정실적 종합 분석
- **직관적 결과**: 점수 및 등급 기반 명확한 추천

이 통합 분석 시스템을 통해 더욱 정교하고 신뢰성 높은 투자 의사결정이 가능합니다.
