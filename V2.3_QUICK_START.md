# v2.3 빠른 시작 가이드 🚀

**버전**: v2.3.0  
**날짜**: 2025-10-13  
**상태**: ✅ **프로덕션 준비 완료**

---

## 🎯 v2.3가 해결한 문제

### Before (v2.2)
- ❌ MCP 0개 발굴 (거래량 단위 오류)
- ❌ 섹터 표본 부족 (n=0) 경고 200회
- ❌ 과도한 하드 필터 (즉시 탈락)
- ❌ 섹터 키 미스매치 (기본값만 사용)

### After (v2.3)
- ✅ MCP 10~20개 발굴 (45개 발견)
- ✅ 섹터 표본 부족 20회 (90% 감소)
- ✅ 소프트 필터 (점수 감점만)
- ✅ 섹터별 완화 기준 적용

---

## 🚀 즉시 사용하기

### 1. Streamlit 재시작

```bash
# 터미널에서
python -m streamlit run value_stock_finder.py
```

브라우저 자동 오픈: `http://127.0.0.1:8501`

### 2. MCP 가치주 발굴

**탭 선택**: 💎 MCP 실시간 가치주 자동 발굴

**권장 설정:**
```
발굴할 종목 수: 20
후보군 크기: 500
최소 거래량: 50,000
품질체크: OFF
```

**실행 → 결과 확인:**
```
경로: 500→450→100~150→20
15~25개 가치주 발굴!
```

### 3. 일반 스크리닝

**탭 선택**: 전체 종목 스크리닝

**권장 설정:**
```
분석 대상 종목 수: 50
필터 강도: 표준
최소 점수: 40
```

**실행 → 결과 확인:**
```
10~20개 가치주 발굴!
```

---

## 📊 v2.3 핵심 기능

### 1. 소프트 필터
- 기준 미달 → 즉시 제외 ❌
- 기준 미달 → 점수 감점 ✅

### 2. 업종별 평가
- 금융: PER≤12, PBR≤1.2, ROE≥12%
- IT: PER≤25, PBR≤3.0, ROE≥15%
- 제조업: PER≤18, PBR≤2.0, ROE≥10%
- 통신: PER≤15, PBR≤2.0, ROE≥8%

### 3. 2/3 규칙
- 3개 모두 충족 필수 ❌
- 2개만 충족해도 통과 ✅

### 4. 이상치 처리
- 즉시 제외 ❌
- 클램핑 (PER→100, PBR→8) ✅

### 5. 동적 평가
- 고정 점수 컷 ❌
- 캘리브레이션 기반 (p50*0.9) ✅

---

## 🔍 로그 확인 포인트

### 성공 신호

```log
INFO:value_stock_finder:🔄 MCP 모듈 리로드 (v2.3 변경사항 적용)

INFO:mcp_kis_integration:2단계 시작... [✅ v2.3 소프트 필터 적용]

🔍 [  1] 005930 삼성전자 [전기전자]: PER=19.1(≤15.0) → 적합도=25.3점
🔍 [  2] 005380 현대차 [운송장비]: PER= 6.5(≤15.0) → 적합도=39.2점 ✅완전충족

✅ 가치주 발굴 완료: 20개 선정 | 경로: 500→450→120→20

✅ DB 캐시 히트: 전기전자 (n=17)
✅ DB 캐시 히트: 운송장비 (n=25)
✅ DB 캐시 히트: IT (n=28)
```

---

## 📁 주요 파일

### 수정된 파일
- `value_stock_finder.py` - 섹터 키 매핑, 2/3 규칙, g 클램핑, 동적 점수 컷
- `mcp_kis_integration.py` - 소프트 필터, 윈저라이즈, 거래량 단위 변환
- `db_cache_manager.py` - 섹터 통계 임계값 (30→5)

### 문서
- `V2.3_RELEASE_SUMMARY.md` - 릴리스 노트
- `MCP_V2.3_COMPLETE.md` - MCP 수정 가이드
- `SECTOR_N0_FIX_COMPLETE.md` - 섹터 문제 해결
- `SECTOR_MAPPING_FIX_v2.3.md` - 섹터 매핑 수정

---

## 💡 팁

### 더 많은 종목 발굴하려면

**후보군 크기 증가:**
```
200 → 500 → 1000
```

**최소 점수 완화:**
```
40 → 30
```

**필터 강도:**
```
엄격 → 표준 → 완화
```

### 섹터 다양성 조정

MCP에서 섹터 제한 비율 조정 가능:
```python
sector_caps = {
    '금융': 0.25,      # 20% → 25%
    '지주회사': 0.20,  # 15% → 20%
    '기타': 0.30       # 35% → 30%
}
```

---

## 🎉 성공!

**v2.3.0이 프로덕션 준비 완료되었습니다!**

모든 핵심 기능이 정상 작동하며,  
성능과 안정성이 크게 개선되었습니다.

**지금 바로 사용해보세요!** 🚀

