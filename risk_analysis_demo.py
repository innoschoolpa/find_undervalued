"""
정성적 리스크 파악 방법 데모
실제 투자에서 정성적 리스크를 어떻게 파악하고 활용하는지 보여주는 예제
"""

import logging
from typing import Dict, Any, List
from datetime import datetime

# 로깅 설정
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s'
)

def demonstrate_qualitative_risk_analysis():
    """정성적 리스크 분석 방법 데모"""
    
    print("🎯 정성적 리스크 파악 방법 가이드")
    print("=" * 60)
    
    # 1. 정성적 리스크의 종류와 특징
    print("\n📋 1. 정성적 리스크의 종류")
    print("-" * 30)
    
    risk_types = {
        "정책 리스크": {
            "설명": "정부 정책 변화로 인한 위험",
            "예시": ["규제 강화", "세제 변화", "무역 정책", "산업 정책"],
            "파악 방법": ["뉴스 모니터링", "정부 발표", "법안 추진 현황", "업계 반응"]
        },
        "ESG 리스크": {
            "설명": "환경, 사회, 지배구조 관련 위험",
            "예시": ["환경 규제", "노동 문제", "지배구조 이슈", "윤리 스캔들"],
            "파악 방법": ["ESG 리포트", "뉴스 분석", "NGO 보고서", "투자자 압력"]
        },
        "시장 감정 리스크": {
            "설명": "시장 참여자들의 심리적 요인",
            "예시": ["공포/탐욕 지수", "투자자 심리", "소셜미디어 감정", "분석가 의견"],
            "파악 방법": ["VIX 지수", "뉴스 감정 분석", "소셜미디어 모니터링", "펀드 플로우"]
        },
        "경쟁 리스크": {
            "설명": "경쟁사 변화로 인한 위험",
            "예시": ["신규 진입자", "기술 혁신", "가격 경쟁", "시장 점유율 변화"],
            "파악 방법": ["경쟁사 분석", "산업 동향", "특허 분석", "시장 조사"]
        },
        "기술 리스크": {
            "설명": "기술 변화로 인한 위험",
            "예시": ["기술 대체", "R&D 실패", "특허 만료", "표준 변화"],
            "파악 방법": ["기술 트렌드", "R&D 투자", "특허 현황", "업계 보고서"]
        }
    }
    
    for risk_type, details in risk_types.items():
        print(f"\n🔍 {risk_type}")
        print(f"   설명: {details['설명']}")
        print(f"   주요 예시: {', '.join(details['예시'][:3])}")
        print(f"   파악 방법: {', '.join(details['파악 방법'][:3])}")
    
    # 2. 실제 종목별 정성적 리스크 분석 예시
    print("\n\n📊 2. 실제 종목별 정성적 리스크 분석 예시")
    print("-" * 50)
    
    stock_risk_examples = {
        "시프트업 (462870)": {
            "업종": "게임업",
            "주요 리스크": {
                "정책 리스크": {
                    "내용": "게임 규제 강화, 청소년 보호법",
                    "점수": 65,
                    "근거": "정부의 게임 중독 대응 정책 강화"
                },
                "기술 리스크": {
                    "내용": "플랫폼 변화, 메타버스 트렌드",
                    "점수": 55,
                    "근거": "모바일→콘솔→VR/AR 플랫폼 전환"
                },
                "시장 감정": {
                    "내용": "게임업계 전반적 우려",
                    "점수": 45,
                    "근거": "중국 게임 규제 영향, 성장 둔화 우려"
                }
            },
            "종합 리스크": "보통 (55점)",
            "투자 시 고려사항": [
                "정부 정책 변화 모니터링",
                "신작 게임 성과 지속 관찰",
                "글로벌 진출 전략 확인"
            ]
        },
        "한미반도체 (042700)": {
            "업종": "반도체 장비",
            "주요 리스크": {
                "정책 리스크": {
                    "내용": "미중 무역 갈등, 기술 수출 규제",
                    "점수": 75,
                    "근거": "미국의 중국 반도체 제재 강화"
                },
                "기술 리스크": {
                    "내용": "기술 노드 진화, 경쟁사 기술",
                    "점수": 60,
                    "근거": "3nm→2nm 기술 전환 리스크"
                },
                "경쟁 리스크": {
                    "내용": "글로벌 경쟁 심화",
                    "점수": 50,
                    "근거": "ASML, TEL 등 글로벌 경쟁사"
                }
            },
            "종합 리스크": "높음 (62점)",
            "투자 시 고려사항": [
                "무역 정책 변화 지속 모니터링",
                "주요 고객사 의존도 분석",
                "기술 경쟁력 유지 여부 확인"
            ]
        }
    }
    
    for stock, analysis in stock_risk_examples.items():
        print(f"\n🏢 {stock}")
        print(f"   업종: {analysis['업종']}")
        print(f"   종합 리스크: {analysis['종합 리스크']}")
        
        print("   주요 리스크:")
        for risk_type, details in analysis['주요 리스크'].items():
            print(f"     • {risk_type}: {details['내용']} ({details['점수']}점)")
            print(f"       근거: {details['근거']}")
        
        print("   투자 시 고려사항:")
        for consideration in analysis['투자 시 고려사항']:
            print(f"     - {consideration}")
    
    # 3. 정성적 리스크 파악을 위한 정보 소스
    print("\n\n📚 3. 정성적 리스크 파악을 위한 정보 소스")
    print("-" * 50)
    
    information_sources = {
        "뉴스 & 미디어": {
            "일반 뉴스": ["연합뉴스", "뉴시스", "매일경제", "한국경제"],
            "전문 매체": ["전자신문", "디지털타임스", "게임플", "바이오타임스"],
            "해외 매체": ["Reuters", "Bloomberg", "Wall Street Journal", "Financial Times"]
        },
        "정부 & 공공기관": {
            "정부 발표": ["관련 부처 홈페이지", "정책브리핑", "정부정책포털"],
            "공공기관": ["한국거래소", "금융감독원", "공정거래위원회", "산업통상자원부"],
            "법령 정보": ["국가법령정보센터", "관련 법안 추진 현황"]
        },
        "투자 & 분석": {
            "증권사": ["IBK투자증권", "NH투자증권", "키움증권", "대신증권"],
            "리서치": ["한국투자증권", "미래에셋증권", "신한금융투자"],
            "펀드": ["연기금", "보험사", "자산운용사 리포트"]
        },
        "기업 정보": {
            "공시": ["DART", "전자공시시스템", "기업 공식 홈페이지"],
            "IR": ["기업 설명회", "분기보고서", "연간보고서"],
            "소셜미디어": ["기업 공식 SNS", "CEO 인터뷰", "기업 블로그"]
        }
    }
    
    for category, sources in information_sources.items():
        print(f"\n📖 {category}")
        for subcategory, source_list in sources.items():
            print(f"   {subcategory}: {', '.join(source_list[:4])}")
    
    # 4. 정성적 리스크 모니터링 체크리스트
    print("\n\n✅ 4. 정성적 리스크 모니터링 체크리스트")
    print("-" * 50)
    
    monitoring_checklist = {
        "일일 모니터링": [
            "주요 뉴스 헤드라인 확인",
            "관련 종목 언급 기사 스크랩",
            "소셜미디어 키워드 모니터링",
            "주요 지수 변동 확인"
        ],
        "주간 모니터링": [
            "업계 동향 리포트 검토",
            "경쟁사 실적 발표 확인",
            "정부 정책 발표 검토",
            "분석가 의견 변화 추적"
        ],
        "월간 모니터링": [
            "ESG 관련 이슈 점검",
            "기술 트렌드 변화 분석",
            "시장 사이클 위치 재평가",
            "투자 테마 변화 확인"
        ],
        "분기별 모니터링": [
            "기업 실적 컨퍼런스 콜 청취",
            "업계 전망 리포트 업데이트",
            "정책 방향성 재검토",
            "경쟁 환경 변화 분석"
        ]
    }
    
    for period, tasks in monitoring_checklist.items():
        print(f"\n📅 {period}")
        for task in tasks:
            print(f"   ☐ {task}")
    
    # 5. 실제 활용 예시
    print("\n\n💡 5. 실제 투자에서의 활용 예시")
    print("-" * 50)
    
    print("\n🔍 시프트업 투자 시 정성적 리스크 체크:")
    print("   1. 정책 리스크: 게임 규제 관련 뉴스 확인")
    print("      - 청소년 보호법 개정 추진 여부")
    print("      - 게임 시간 제한 정책 변화")
    print("      - 해외 진출 시 현지 규제 환경")
    
    print("\n   2. 기술 리스크: 게임 기술 트렌드 모니터링")
    print("      - 메타버스, VR/AR 기술 발전")
    print("      - 클라우드 게임 서비스 확산")
    print("      - AI 기술을 활용한 게임 개발")
    
    print("\n   3. 시장 감정: 게임업계 전반적 분위기")
    print("      - 신작 게임 성과에 대한 기대감")
    print("      - 중국 게임 시장 상황")
    print("      - 글로벌 게임 시장 성장률")
    
    print("\n🎯 한미반도체 투자 시 정성적 리스크 체크:")
    print("   1. 정책 리스크: 무역 정책 변화 모니터링")
    print("      - 미중 무역 갈등 진행 상황")
    print("      - 반도체 수출 규제 변화")
    print("      - 한국 정부의 반도체 지원 정책")
    
    print("\n   2. 기술 리스크: 반도체 기술 발전 추적")
    print("      - 차세대 기술 노드 개발 현황")
    print("      - HBM, AI 반도체 수요 증가")
    print("      - 경쟁사 기술 경쟁력 비교")
    
    print("\n   3. 경쟁 리스크: 시장 점유율 변화")
    print("      - 글로벌 경쟁사 실적 비교")
    print("      - 신규 진입자 위협")
    print("      - 고객사 다변화 전략")

def demonstrate_risk_scoring():
    """리스크 점수 계산 방법 데모"""
    
    print("\n\n📊 6. 정성적 리스크 점수 계산 방법")
    print("-" * 50)
    
    print("정성적 리스크는 0-100점으로 평가됩니다:")
    print("• 0-20점: 매우 낮은 리스크 (투자 유리)")
    print("• 21-40점: 낮은 리스크 (투자 적합)")
    print("• 41-60점: 보통 리스크 (신중한 투자)")
    print("• 61-80점: 높은 리스크 (투자 주의)")
    print("• 81-100점: 매우 높은 리스크 (투자 자제)")
    
    print("\n예시: 시프트업 리스크 점수 계산")
    print("정책 리스크: 65점 (높음)")
    print("  - 게임 규제 강화: +30점")
    print("  - 청소년 보호법: +20점")
    print("  - 글로벌 진출 제약: +15점")
    print("  = 총 65점")
    
    print("\n기술 리스크: 55점 (보통)")
    print("  - 플랫폼 변화: +25점")
    print("  - 기술 혁신 속도: +20점")
    print("  - R&D 투자 부족: +10점")
    print("  = 총 55점")
    
    print("\n종합 리스크: 60점 (보통)")
    print("  = (65 + 55) / 2 = 60점")

def main():
    """메인 함수"""
    demonstrate_qualitative_risk_analysis()
    demonstrate_risk_scoring()
    
    print("\n\n🎯 정성적 리스크 파악의 핵심 포인트")
    print("=" * 60)
    print("1. 📰 지속적인 정보 수집과 모니터링")
    print("2. 🔍 다양한 관점에서의 종합적 분석")
    print("3. ⚖️ 정량적 지표와의 균형잡힌 평가")
    print("4. 🎯 업종별 특성을 고려한 맞춤형 분석")
    print("5. 📈 시장 상황과 투자 목표에 따른 적응적 평가")
    
    print("\n💡 투자 결정 시 정성적 리스크 활용법:")
    print("• 높은 리스크: 투자 비중 축소 또는 투자 연기")
    print("• 보통 리스크: 신중한 투자, 지속적 모니터링")
    print("• 낮은 리스크: 정상적 투자 진행")
    print("• 매우 낮은 리스크: 적극적 투자 고려")

if __name__ == "__main__":
    main()

