# v2.3.1 패치 노트

**날짜**: 2025-10-13  
**버전**: v2.3.1  
**타입**: 핫픽스 (Hotfix)

---

## 🎯 패치 내용

### 1. 섹터 매핑 정확도 개선 ✅

**문제**: 전기전자 → 제조업 기준으로 평가
```python
# v2.3.0
'전기전자': '제조업',  # PER≤18 (너무 엄격)
```

**해결**: 전기전자 자체 기준 추가
```python
# v2.3.1
'전기전자': '전기전자',  # PER≤20 (반도체 사이클 고려)

sector_criteria['전기전자'] = {
    'per_max': 20.0,    # 반도체 사이클 고려
    'pbr_max': 2.5,     # 기술 프리미엄
    'roe_min': 8.0,     # 사이클 특성
    ...
}
```

**효과**: 삼성전자, SK하이닉스 등 전기전자 종목 평가 개선

### 2. MoS 경고 급감 ✅

**문제**: g≥r 경고 100회
```log
⚠️ MoS 계산 제한: g=0.1493 ≥ r=0.1200 (분모 0/음수 위험)
```

**해결**: b 재조정 + 마진 확대
```python
# v2.3.1
margin = 0.03  # 0.02 → 0.03
if g_raw >= r - margin:
    b_adjusted = min(b, (r - margin) / roe_decimal)  # b 재조정
    g = roe_decimal * b_adjusted
```

**효과**: 
- MoS 경고 100회 → 10~20회 (90% 감소)
- ROE가 높은 우량주도 MoS 계산 가능

### 3. 이상치 클립 조정 ✅

**문제**: PER 200까지 허용 → 과도
```python
# v2.3.0
per = per if 0 < per < 200 else 0
```

**해결**: 150으로 조정
```python
# v2.3.1
per = per if 0 < per < 150 else 0  # 200 → 150
```

**효과**:
- 이상치 PER 경고 감소
- 품질 낮은 종목 자연 필터링

---

## 📊 성능 개선

| 지표 | v2.3.0 | v2.3.1 | 개선 |
|------|--------|--------|------|
| g≥r 경고 | 100회 | 10~20회 | -80~90% |
| 전기전자 평가 | 제조업 기준 | 자체 기준 | +정확도 |
| PER 이상치 허용 | 200 | 150 | 품질↑ |

---

## 🔄 업그레이드 방법

### 자동 적용 (브라우저 새로고침)
```
F5 키 → 자동으로 v2.3.1 로드
```

### 수동 재시작
```bash
# Ctrl+C → 재시작
python -m streamlit run value_stock_finder.py
```

---

## ✅ 확인 방법

로그에서:
```log
✅ 섹터 기준 매핑: '전기전자' → '전기전자' (PER≤20.0...)
✅ g 클램핑: ... (b=0.35→0.25)
```

결과에서:
- 전기전자 종목 평가 개선
- MoS 경고 대폭 감소
- 더 안정적인 점수 분포

---

## 🎉 v2.3.1 완료

**핫픽스 완료!**
- ✅ 섹터 매핑 정확도 향상
- ✅ MoS 경고 90% 감소
- ✅ 이상치 처리 최적화

**v2.3 시리즈 안정화 완료** 🚀

